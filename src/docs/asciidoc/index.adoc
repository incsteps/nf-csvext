= nf-csvext
Jorge Aguilera <jorge@incsteps.com>
:toc: left
:imagesdir: images

== Install

To install the plugin, simply add the plugin into your `nextflow.config`

.nextflow.config
[source]
----
plugins {
    id "nf-csvext@0.1.0"
}
----

Once installed the plugin povides several csv `functions`

== csv_concat

Concat two (or more) CSV files. If a header is specified, it validates files have the same size and doesn't output
the header of the appended file(s)

Example:

[source]
----
include { csv_concat } from 'plugin/nf-csvext'

params.input = 'data/names.csv'
params.concat = 'data/concat_names.csv'
csv_file = file(params.input)

workflow {

    Channel.fromPath( params.input)
        | map{ source ->
            csv_concat( source, file(params.concat), header:true )
        }
        | splitCsv(header:true)
        | view
}
----

if `params.input` and `params.concat are both a csv with `name`, `birthdate`, `quote`
, with one line everyone, them the output will be:

[source]
----
[name:Albert Einstein, birtdhay:14 de marzo de 1879, quote:"La imaginación es más importante que el conocimiento."]
[name:Rosa Parks, birthday:4 de febrero de 1913, quote:"Cada persona debe vivir su vida como un modelo para los demás."]
----

To append more than one file to `source` use a List as second arguments:

`csv_concat( source, [ file(params.concat), file(params.another_file) ], header:true )`

== csv_sort

Sort a CSV by a column index and return a new file

[source]
----
workflow {
   Channel.fromPath( params.input )
        | map{ source ->
            csv_sort( source, column: 2)
        }
        | splitCsv(header:true)
        | view
}
----